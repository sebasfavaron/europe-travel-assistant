import{b as le,d as be,a as $,f as V}from"../chunks/DMKyzn_w.js";import{i as Ce}from"../chunks/Dz1NuX9Y.js";import{v as j,B as he,aM as ge,x as w,G as B,M as N,C as ae,g as y,D as we,H as Te,F as ce,I as q,y as x,Z as oe,ar as Ee,a9 as ue,m as I,aN as D,w as te,A as Me,aE as ke,aO as Re,ap as ie,aP as Ae,aQ as De,aI as H,Y as de,aR as Pe,n as _e,q as ye,aS as J,L as Fe,aT as Se,aU as xe,ao as $e,o as Le,al as Y,t as U,P as ze,aV as Ie,as as Ne,am as Be,aW as Ve,aX as Ge,aJ as Oe,b as He,K as Qe,aY as qe,p as We,V as je,j as Ue,k as L,s as z,J as Ye,aZ as Ke,l as S,ax as k,a_ as Je,a$ as Xe}from"../chunks/BQZcrEND.js";import{e as X,s as Ze}from"../chunks/Bl5GMuwN.js";import{i as fe,b as ea}from"../chunks/41RAYw7-.js";function aa(e,t){return t}function ta(e,t,r){for(var n=[],i=t.length,a,s=t.length,o=0;o<i;o++){let v=t[o];ye(v,()=>{if(a){if(a.pending.delete(v),a.done.add(v),a.pending.size===0){var m=e.outrogroups;re(ie(a.done)),m.delete(a),m.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=n.length===0&&r!==null;if(l){var f=r,u=f.parentNode;$e(u),u.append(f),e.items.clear()}re(t,!l)}else a={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(a)}function re(e,t=!0){for(var r=0;r<e.length;r++)Le(e[r],t)}var pe;function ve(e,t,r,n,i,a=null){var s=e,o=new Map,l=(t&ge)!==0;if(l){var f=e;s=w?B(N(f)):f.appendChild(j())}w&&ae();var u=null,v=ke(()=>{var p=r();return Re(p)?p:p==null?[]:ie(p)}),m,g=!0;function M(){c.fallback=u,ra(c,m,s,t,n),u!==null&&(m.length===0?(u.f&D)===0?_e(u):(u.f^=D,Q(u,null,s)):ye(u,()=>{u=null}))}var P=he(()=>{m=y(v);var p=m.length;let T=!1;if(w){var R=we(s)===Te;R!==(p===0)&&(s=ce(),B(s),q(!1),T=!0)}for(var d=new Set,_=I,b=Me(),h=0;h<p;h+=1){w&&x.nodeType===oe&&x.data===Ee&&(s=x,T=!0,q(!1));var E=m[h],A=n(E,h),C=g?null:o.get(A);C?(C.v&&ue(C.v,E),C.i&&ue(C.i,h),b&&_.skipped_effects.delete(C.e)):(C=na(o,g?s:pe??=j(),E,A,h,i,t,r),g||(C.e.f|=D),o.set(A,C)),d.add(A)}if(p===0&&a&&!u&&(g?u=te(()=>a(s)):(u=te(()=>a(pe??=j())),u.f|=D)),w&&p>0&&B(ce()),!g)if(b){for(const[G,K]of o)d.has(G)||_.skipped_effects.add(K.e);_.oncommit(M),_.ondiscard(()=>{})}else M();T&&q(!0),y(v)}),c={effect:P,items:o,outrogroups:null,fallback:u};g=!1,w&&(s=x)}function O(e){for(;e!==null&&(e.f&Se)===0;)e=e.next;return e}function ra(e,t,r,n,i){var a=(n&xe)!==0,s=t.length,o=e.items,l=O(e.effect.first),f,u=null,v,m=[],g=[],M,P,c,p;if(a)for(p=0;p<s;p+=1)M=t[p],P=i(M,p),c=o.get(P).e,(c.f&D)===0&&(c.nodes?.a?.measure(),(v??=new Set).add(c));for(p=0;p<s;p+=1){if(M=t[p],P=i(M,p),c=o.get(P).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(c),C.done.delete(c);if((c.f&D)!==0)if(c.f^=D,c===l)Q(c,null,r);else{var T=u?u.next:l;c===e.effect.last&&(e.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),F(e,u,c),F(e,c,T),Q(c,T,r),u=c,m=[],g=[],l=O(u.next);continue}if((c.f&J)!==0&&(_e(c),a&&(c.nodes?.a?.unfix(),(v??=new Set).delete(c))),c!==l){if(f!==void 0&&f.has(c)){if(m.length<g.length){var R=g[0],d;u=R.prev;var _=m[0],b=m[m.length-1];for(d=0;d<m.length;d+=1)Q(m[d],R,r);for(d=0;d<g.length;d+=1)f.delete(g[d]);F(e,_.prev,b.next),F(e,u,_),F(e,b,R),l=R,u=b,p-=1,m=[],g=[]}else f.delete(c),Q(c,l,r),F(e,c.prev,c.next),F(e,c,u===null?e.effect.first:u.next),F(e,u,c),u=c;continue}for(m=[],g=[];l!==null&&l!==c;)(f??=new Set).add(l),g.push(l),l=O(l.next);if(l===null)continue}(c.f&D)===0&&m.push(c),u=c,l=O(c.next)}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(re(ie(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||f!==void 0){var h=[];if(f!==void 0)for(c of f)(c.f&J)===0&&h.push(c);for(;l!==null;)(l.f&J)===0&&l!==e.fallback&&h.push(l),l=O(l.next);var E=h.length;if(E>0){var A=(n&ge)!==0&&s===0?r:null;if(a){for(p=0;p<E;p+=1)h[p].nodes?.a?.measure();for(p=0;p<E;p+=1)h[p].nodes?.a?.fix()}ta(e,h,A)}}a&&Fe(()=>{if(v!==void 0)for(c of v)c.nodes?.a?.apply()})}function na(e,t,r,n,i,a,s,o){var l=(s&Ae)!==0?(s&De)===0?H(r,!1,!1):de(r):null,f=(s&Pe)!==0?de(i):null;return{v:l,i:f,e:te(()=>(a(t,l??r,f??i,o),()=>{e.delete(n)}))}}function Q(e,t,r){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,a=t&&(t.f&D)===0?t.nodes.start:r;n!==null;){var s=Y(n);if(a.before(n),n===i)return;n=s}}function F(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function sa(e,t,r=!1,n=!1,i=!1){var a=e,s="";U(()=>{var o=ze;if(s===(s=t()??"")){w&&ae();return}if(o.nodes!==null&&(Ie(o.nodes.start,o.nodes.end),o.nodes=null),s!==""){if(w){x.data;for(var l=ae(),f=l;l!==null&&(l.nodeType!==oe||l.data!=="");)f=l,l=Y(l);if(l===null)throw Ne(),Be;le(x,f),a=B(l);return}var u=s+"";r?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var v=be(u);if((r||n)&&(v=N(v)),le(N(v),v.lastChild),r||n)for(;N(v);)a.before(N(v));else a.before(v)}})}function oa(e,t){let r=null,n=w;var i;if(w){r=x;for(var a=N(document.head);a!==null&&(a.nodeType!==oe||a.data!==e);)a=Y(a);if(a===null)q(!1);else{var s=Y(a);a.remove(),B(s)}}w||(i=document.head.appendChild(j()));try{he(()=>t(i),Ve)}finally{n&&(q(!0),B(r))}}function ia(e,t,r){var n=e==null?"":""+e;return n===""?null:n}function la(e,t,r,n,i,a){var s=e.__className;if(w||s!==r||s===void 0){var o=ia(r);(!w||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=r}return a}function ca(e,t,r=t){var n=new WeakSet;Ge(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=Z(e)?ee(a):a,r(a),I!==null&&n.add(I),await Oe(),a!==(a=t())){var s=e.selectionStart,o=e.selectionEnd,l=e.value.length;if(e.value=a??"",o!==null){var f=e.value.length;s===o&&o===l&&f>l?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=s,e.selectionEnd=Math.min(o,f))}}}),(w&&e.defaultValue!==e.value||He(t)==null&&e.value)&&(r(Z(e)?ee(e.value):e.value),I!==null&&n.add(I)),Qe(()=>{var i=t();if(e===document.activeElement){var a=qe??I;if(n.has(a))return}Z(e)&&i===ee(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Z(e){var t=e.type;return t==="number"||t==="range"}function ee(e){return e===""?null:+e}const ua={madrid:{attractions:["Museo del Prado","Palacio Real","Parque del Retiro","Plaza Mayor","Puerta del Sol"],restaurants:["Sobrino de BotÃ­n","Casa Lucio","Mercado de San Miguel","La Latina"],transport:"Metro de Madrid, autobuses, taxis. Tarjeta Multi recomendada.",tips:"Mejor Ã©poca: primavera y otoÃ±o. Siesta de 14-16h. Cena tarde (22h+)."},barcelona:{attractions:["Sagrada Familia","Parque GÃ¼ell","Las Ramblas","Barrio GÃ³tico","Casa BatllÃ³"],restaurants:["Cal Pep","Quimet & Quimet","Mercado de la BoquerÃ­a","Els Quatre Gats"],transport:"Metro TMB, autobuses, Bicing (bicicletas). Hola Barcelona Card.",tips:"Playa urbana disponible. CatalÃ¡n y espaÃ±ol. Pickpockets en Las Ramblas."},roma:{attractions:["Coliseo","Foro Romano","Vaticano","Fontana di Trevi","PanteÃ³n"],restaurants:["Da Enzo al 29","Checchino dal 1887","Mercato Centrale","Trastevere"],transport:"Metro ATAC, autobuses, tranvÃ­as. Roma Pass recomendada.",tips:"Siesta 13-15h. Dress code en Vaticano. Agua gratis en fuentes pÃºblicas."},amsterdam:{attractions:["Rijksmuseum","Casa de Ana Frank","Canales","Vondelpark","Red Light District"],restaurants:["CafÃ© de Reiger","Restaurant Greetje","Foodhallen","Winkel 43"],transport:"Bicicletas (principal), tranvÃ­as GVB, metro. OV-chipkaart.",tips:"Bicicleta es obligatoria. Coffeeshops legales. Propinas no obligatorias."},paris:{attractions:["Torre Eiffel","Louvre","Notre-Dame","SacrÃ©-CÅ“ur","Champs-Ã‰lysÃ©es"],restaurants:["L'As du Fallafel","Du Pain et des IdÃ©es","MarchÃ© Saint-Germain","Le Comptoir du Relais"],transport:"Metro RATP, RER, autobuses. Navigo Easy o Passe Navigo.",tips:"Museos gratis primer domingo del mes. Propina incluida. Bonjour obligatorio."},venecia:{attractions:["Plaza San Marcos","Puente de Rialto","Palacio Ducal","Gondolas","Murano y Burano"],restaurants:["Osteria alle Testiere","Cantina Do Spade","Mercato di Rialto","Bacari tÃ­picos"],transport:"Vaporetto (barco-bus), a pie. ACTV travel card.",tips:"Acqua alta en invierno. Reservar restaurantes. Evitar trampas turÃ­sticas."},florencia:{attractions:["Duomo","Uffizi","Ponte Vecchio","Palazzo Pitti","Piazzale Michelangelo"],restaurants:["Trattoria Mario","All'Antico Vinaio","Mercato Centrale","Santo Spirito"],transport:"A pie (centro histÃ³rico), autobuses ATAF. Firenzecard.",tips:"Reservar Uffizi con anticipaciÃ³n. Aperitivo 18-20h. Gelato artesanal."}},da={attractions:[`Para **{city}** te recomiendo visitar:

{attractions}

{tips}`,`En **{city}** no te puedes perder:

{attractions}

ğŸ’¡ {tips}`],restaurants:[`Para comer bien en **{city}**:

{restaurants}

ğŸ½ï¸ {tips}`,`Restaurantes recomendados en **{city}**:

{restaurants}

{tips}`],transport:[`Para moverte en **{city}**:

{transport}

{tips}`,`Transporte en **{city}**:

{transport}

ğŸ’¡ {tips}`],general:[`En **{city}** puedes:

**ğŸ›ï¸ Atracciones:** {attractions}

**ğŸ½ï¸ Restaurantes:** {restaurants}

**ğŸš‡ Transporte:** {transport}

ğŸ’¡ **Tips:** {tips}`]};function ne(e){const t={madrid:["madrid","prado","retiro","sol"],barcelona:["barcelona","sagrada","gÃ¼ell","ramblas","gaudÃ­"],roma:["roma","coliseo","vaticano","trevi","romano"],amsterdam:["amsterdam","rijks","canales","ana frank","vondelpark"],paris:["paris","parÃ­s","eiffel","louvre","notre","champs"],venecia:["venecia","venice","san marcos","rialto","gondola"],florencia:["florencia","florence","uffizi","duomo","ponte vecchio"]},r=e.toLowerCase();for(const[n,i]of Object.entries(t))if(i.some(a=>r.includes(a)))return n;return null}function fa(e){const t=e.toLowerCase();return t.includes("comer")||t.includes("restaurante")||t.includes("comida")?"restaurants":t.includes("transporte")||t.includes("mover")||t.includes("metro")||t.includes("aeropuerto")?"transport":t.includes("ver")||t.includes("visitar")||t.includes("hacer")||t.includes("museo")?"attractions":"general"}function me(e){return e.map(t=>`â€¢ ${t}`).join(`
`)}function pa(e){return e[Math.floor(Math.random()*e.length)]}function va(e,t){let r=null,n=null;for(let s=t.length-1;s>=0;s--){const o=t[s];if(o.type==="user"){const l=ne(o.content);if(l){r=l;break}}}const i=e.toLowerCase(),a=["ahÃ­","allÃ­","allÃ¡","ese lugar","esa ciudad","tambiÃ©n","y","ademÃ¡s","otra cosa","mÃ¡s","otros","otras"].some(s=>i.includes(s));return{lastCity:r,lastIntent:n,needsContext:a&&!ne(e)}}async function ma(e,t=[]){await new Promise(f=>setTimeout(f,300));const r=va(e,t),n=ne(e)||r.lastCity,i=fa(e);if(!n)return r.needsContext?"ğŸ¤” Â¿Te referÃ­s a la misma ciudad de tu pregunta anterior? PodÃ©s mencionar especÃ­ficamente Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia para ayudarte mejor.":"ğŸ¤” No pude identificar la ciudad especÃ­fica. Â¿PodrÃ­as mencionar Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia?";const a=ua[n],s=da[i],o=pa(s);let l="";return r.lastCity&&r.lastCity===n&&t.length>1&&(l="Siguiendo con "+n.charAt(0).toUpperCase()+n.slice(1)+`:

`),l+o.replace(/{city}/g,n.charAt(0).toUpperCase()+n.slice(1)).replace(/{attractions}/g,me(a.attractions.slice(0,5))).replace(/{restaurants}/g,me(a.restaurants)).replace(/{transport}/g,a.transport).replace(/{tips}/g,a.tips)}class ha{constructor(){this.documents=[],this.wordDocFreq=new Map,this.totalDocs=0,this.loaded=!1}cleanText(t){return t.toLowerCase().replace(/[^\w\sÃ¡Ã©Ã­Ã³ÃºÃ±Ã¼-]/g," ").replace(/\s+/g," ").trim()}tokenize(t){const r=new Set(["el","la","de","en","y","a","un","con","por","para","es","del","se","que","le","da","su","te","lo"]);return this.cleanText(t).split(" ").filter(n=>n.length>2&&!r.has(n))}extractHtmlText(t){return t.replace(/<script[^>]*>.*?<\/script>/gis," ").replace(/<style[^>]*>.*?<\/style>/gis," ").replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&[^;]+;/g," ").replace(/\s+/g," ").trim()}chunkText(t,r=500){const n=t.split(/[.!?]+/).filter(s=>s.trim()),i=[];let a="";for(const s of n){const o=s.trim();o&&((a+o).length<r?a+=(a?" ":"")+o:(a&&i.push(a),a=o))}return a&&i.push(a),i.filter(s=>s.length>100)}async loadDocuments(){if(!this.loaded){console.log("ğŸš€ Cargando documentos para RAG ultraligero...");try{const t=[{file:"/data/madrid_guide.txt",city:"Madrid"},{file:"/data/rome_guide.txt",city:"Rome"}];for(const{file:r,city:n}of t)try{const i=await fetch(r);if(!i.ok){console.warn(`âš ï¸ No se pudo cargar ${r}: ${i.status}`);continue}const a=await i.text(),s=this.chunkText(a);s.forEach((o,l)=>{this.documents.push({id:`${n.toLowerCase()}_${l}`,content:o,source:r.split("/").pop(),type:"city_guide",city:n})}),console.log(`ğŸ“ Cargado: ${s.length} chunks de ${n}`)}catch(i){console.warn(`âš ï¸ No se pudo cargar ${r}:`,i.message)}try{const r=await fetch("/data/europe_travel_guides.html");if(r.ok){const n=await r.text(),i=this.extractHtmlText(n),a=this.chunkText(i);a.forEach((s,o)=>{this.documents.push({id:`guide_${o}`,content:s,source:"Europe Travel Guides",type:"guide",city:"General"})}),console.log(`ğŸ“š Cargado: ${a.length} chunks de Europe Travel Guides`)}}catch(r){console.warn("âš ï¸ Europe Travel Guides no disponible:",r.message)}}catch(t){console.error("âŒ Error cargando documentos:",t)}this.totalDocs=this.documents.length,this._calculateIDF(),this.loaded=!0,console.log(`âœ… RAG inicializado: ${this.totalDocs} documentos cargados`)}}_calculateIDF(){console.log("ğŸ§® Calculando frecuencias IDF...");for(const t of this.documents){const r=new Set(this.tokenize(t.content));for(const n of r)this.wordDocFreq.set(n,(this.wordDocFreq.get(n)||0)+1)}console.log(`ğŸ“Š Vocabulario: ${this.wordDocFreq.size} tÃ©rminos Ãºnicos`)}calculateTFIDF(t,r){const n=this.tokenize(r),i=new Map;for(const o of n)i.set(o,(i.get(o)||0)+1);const a=n.length;if(a===0)return 0;let s=0;for(const o of t)if(i.has(o)){const l=i.get(o)/a,f=this.wordDocFreq.get(o)||1,u=Math.log(this.totalDocs/f);s+=l*u}return s}async search(t,r=null,n=5){await this.loadDocuments();const i=this.tokenize(t);if(i.length===0)return[];const a=[];for(const s of this.documents){if(r&&s.city.toLowerCase()!==r.toLowerCase())continue;const o=this.calculateTFIDF(i,s.content);o>0&&a.push({content:s.content.length>300?s.content.substring(0,300)+"...":s.content,fullContent:s.content,score:o,source:s.source,city:s.city,type:s.type})}return a.sort((s,o)=>o.score-s.score),a.slice(0,n)}async getContextForQuery(t,r=null,n=800){const i=await this.search(t,r,3);if(i.length===0)return`No encontrÃ© informaciÃ³n especÃ­fica para: "${t}"`;const a=[];let s=0;for(const o of i){const l=`[${o.source} - ${o.city}]`,f=o.fullContent.substring(0,400),u=`${l}
${f}
`;if(s+u.length>n)break;a.push(u),s+=u.length}return a.join(`
---
`)}getStats(){return{documentsLoaded:this.totalDocs,vocabularySize:this.wordDocFreq.size,memoryEstimate:`~${Math.round((this.totalDocs*.5+this.wordDocFreq.size*.1)/1024)}KB`,loaded:this.loaded}}}let W=null;async function ga(e,t=[]){W||(W=new ha);const r=_a(e,t),n=se(e)||r.lastCity;if(!n&&r.needsContext)return"ğŸ¤” Â¿Te referÃ­s a la misma ciudad de tu pregunta anterior? PodÃ©s mencionar Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia.";if(!n){const o=await W.search(e,null,3);if(o.length===0)return"ğŸ¤” No encontrÃ© informaciÃ³n especÃ­fica. PodÃ©s preguntarme sobre Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia.";const l=o[0];return`EncontrÃ© informaciÃ³n sobre **${e}**:

${l.content}`}const i=await W.search(e,n,2);if(i.length===0)return await ma(e,t);let a="";r.lastCity&&r.lastCity===n&&t.length>1&&(a=`Siguiendo con ${n}:

`);const s=i[0];return a+=`**${n}** - ${e}:

${s.content}`,i.length>1&&(a+=`

**TambiÃ©n:**
${i[1].content}`),a}function se(e){const t={madrid:["madrid","prado","retiro","sol"],barcelona:["barcelona","sagrada","gÃ¼ell","ramblas","gaudÃ­"],roma:["roma","coliseo","vaticano","trevi","romano"],amsterdam:["amsterdam","rijks","canales","ana frank","vondelpark"],paris:["paris","parÃ­s","eiffel","louvre","notre","champs"],venecia:["venecia","venice","san marcos","rialto","gondola"],florencia:["florencia","florence","uffizi","duomo","ponte vecchio"]},r=e.toLowerCase();for(const[n,i]of Object.entries(t))if(i.some(a=>r.includes(a)))return n;return null}function _a(e,t){let r=null;for(let a=t.length-1;a>=0;a--){const s=t[a];if(s.type==="user"){const o=se(s.content);if(o){r=o;break}}}const n=e.toLowerCase(),i=["ahÃ­","allÃ­","allÃ¡","ese lugar","esa ciudad","tambiÃ©n","y","ademÃ¡s","otra cosa","mÃ¡s","otros","otras"].some(a=>n.includes(a));return{lastCity:r,needsContext:i&&!se(e)}}var ya=V('<meta name="description" content="Tu asistente turÃ­stico offline para Europa"/>'),ba=V('<button class="suggestion"> </button>'),Ca=V('<div class="avatar">ğŸ‡ªğŸ‡º</div>'),wa=V('<div><!> <div class="message-content"><!></div></div>'),Ta=V('<div class="message assistant"><div class="avatar">ğŸ‡ªğŸ‡º</div> <div class="typing-indicator"><div class="typing-dots"><div class="dot"></div> <div class="dot"></div> <div class="dot"></div></div> <span style="font-size: 14px; color: #666;">Escribiendo...</span></div></div>'),Ea=V('<div class="container"><div class="header"><h1>ğŸ‡ªğŸ‡º Europe Travel Assistant</h1> <div class="subtitle">Tu guÃ­a personal para Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia, Florencia</div></div> <div class="suggestions"></div> <div class="chat-container"><!> <!></div> <div class="input-container"><textarea class="input-field" placeholder="Preguntame sobre Europa..." rows="1"></textarea> <button class="send-button">â–¶ï¸</button></div></div>');function Pa(e,t){We(t,!1);let r=H([{id:1,type:"assistant",content:`Â¡Hola! Soy tu asistente personal para Europa. Preguntame sobre quÃ© hacer, dÃ³nde comer, cÃ³mo moverte o cualquier cosa sobre Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia.

**Todo funciona offline** âœˆï¸ - perfecto para tus viajes.`}]),n=H(""),i=H(!1),a=H();const s=["Â¿QuÃ© hacer esta tarde en Roma?","Restaurantes baratos en ParÃ­s","CÃ³mo ir del aeropuerto al centro en Amsterdam","Mejores museos en Madrid"];function o(){y(a)&&setTimeout(()=>{Xe(a,y(a).scrollTop=y(a).scrollHeight)},100)}async function l(d=y(n).trim()){if(!d)return;const _={id:Date.now(),type:"user",content:d};k(r,[...y(r),_]),k(n,""),o(),k(i,!0),o();try{await new Promise(E=>setTimeout(E,500));const b=await ga(d,y(r)),h={id:Date.now()+1,type:"assistant",content:b};k(i,!1),k(r,[...y(r),h]),o()}catch{k(i,!1);const h={id:Date.now()+1,type:"assistant",content:"Lo siento, hubo un error procesando tu pregunta. Â¿PodÃ©s intentar de nuevo?"};k(r,[...y(r),h]),o()}}function f(d){d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),l())}function u(d){k(n,d),l()}je(()=>{o()}),Ce();var v=Ea();oa("1uha8ag",d=>{var _=ya();Ye(()=>{Ke.title="Europe Travel Assistant"}),$(d,_)});var m=z(L(v),2);ve(m,5,()=>s,aa,(d,_)=>{var b=ba(),h=L(b,!0);S(b),U(()=>Ze(h,y(_))),X("click",b,()=>u(y(_))),$(d,b)}),S(m);var g=z(m,2),M=L(g);ve(M,1,()=>y(r),d=>d.id,(d,_)=>{var b=wa(),h=L(b);{var E=G=>{var K=Ca();$(G,K)};fe(h,G=>{y(_).type==="assistant"&&G(E)})}var A=z(h,2),C=L(A);sa(C,()=>y(_).content.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")),S(A),S(b),U(()=>la(b,1,`message ${y(_).type??""}`)),$(d,b)});var P=z(M,2);{var c=d=>{var _=Ta();$(d,_)};fe(P,d=>{y(i)&&d(c)})}S(g),ea(g,d=>k(a,d),()=>y(a));var p=z(g,2),T=L(p);Je(T);var R=z(T,2);S(p),S(v),U(d=>R.disabled=d,[()=>!y(n).trim()]),ca(T,()=>y(n),d=>k(n,d)),X("keydown",T,f),X("click",R,()=>l()),$(e,v),Ue()}export{Pa as component};
