import{b as ie,c as _e,a as L,f as H}from"../chunks/CJ-4FPFb.js";import{i as be}from"../chunks/DURHG3V8.js";import{v as j,B as pe,at as me,x as E,G as x,M as V,C as ee,g as b,D as ye,H as Ce,F as oe,I as $,y as B,Z as ne,ar as Ee,a9 as le,m as I,au as S,w as ae,A as Te,av as Me,aw as Ae,ap as se,ax as Re,ay as Pe,az as Q,Y as ce,aA as we,n as ge,q as he,aB as W,L as Se,aC as ke,aD as De,ao as Fe,o as Be,al as K,t as U,P as Le,aE as Ne,as as ze,am as Ie,aF as Ve,aG as xe,aH as He,b as Oe,K as Ge,aI as Qe,p as qe,V as $e,j as je,k as N,s as z,J as Ue,aJ as Ke,l as F,aK as R,aL as Ye,aM as We}from"../chunks/B_G4vn1c.js";import{e as J,s as Je}from"../chunks/BhtGbhlF.js";import{i as ue,b as Xe}from"../chunks/RkS1BJ82.js";function Ze(e,a){return a}function ea(e,a,t){for(var i=[],d=a.length,r,o=a.length,l=0;l<d;l++){let p=a[l];he(p,()=>{if(r){if(r.pending.delete(p),r.done.add(p),r.pending.size===0){var m=e.outrogroups;re(se(r.done)),m.delete(r),m.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var n=i.length===0&&t!==null;if(n){var v=t,u=v.parentNode;Fe(u),u.append(v),e.items.clear()}re(a,!n)}else r={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(r)}function re(e,a=!0){for(var t=0;t<e.length;t++)Be(e[t],a)}var de;function fe(e,a,t,i,d,r=null){var o=e,l=new Map,n=(a&me)!==0;if(n){var v=e;o=E?x(V(v)):v.appendChild(j())}E&&ee();var u=null,p=Me(()=>{var f=t();return Ae(f)?f:f==null?[]:se(f)}),m,h=!0;function A(){s.fallback=u,aa(s,m,o,a,i),u!==null&&(m.length===0?(u.f&S)===0?ge(u):(u.f^=S,q(u,null,o)):he(u,()=>{u=null}))}var k=pe(()=>{m=b(p);var f=m.length;let T=!1;if(E){var P=ye(o)===Ce;P!==(f===0)&&(o=oe(),x(o),$(!1),T=!0)}for(var c=new Set,_=I,y=Te(),g=0;g<f;g+=1){E&&B.nodeType===ne&&B.data===Ee&&(o=B,T=!0,$(!1));var M=m[g],w=i(M,g),C=h?null:l.get(w);C?(C.v&&le(C.v,M),C.i&&le(C.i,g),y&&_.skipped_effects.delete(C.e)):(C=ra(l,h?o:de??=j(),M,w,g,d,a,t),h||(C.e.f|=S),l.set(w,C)),c.add(w)}if(f===0&&r&&!u&&(h?u=ae(()=>r(o)):(u=ae(()=>r(de??=j())),u.f|=S)),E&&f>0&&x(oe()),!h)if(y){for(const[O,Y]of l)c.has(O)||_.skipped_effects.add(Y.e);_.oncommit(A),_.ondiscard(()=>{})}else A();T&&$(!0),b(p)}),s={effect:k,items:l,outrogroups:null,fallback:u};h=!1,E&&(o=B)}function G(e){for(;e!==null&&(e.f&ke)===0;)e=e.next;return e}function aa(e,a,t,i,d){var r=(i&De)!==0,o=a.length,l=e.items,n=G(e.effect.first),v,u=null,p,m=[],h=[],A,k,s,f;if(r)for(f=0;f<o;f+=1)A=a[f],k=d(A,f),s=l.get(k).e,(s.f&S)===0&&(s.nodes?.a?.measure(),(p??=new Set).add(s));for(f=0;f<o;f+=1){if(A=a[f],k=d(A,f),s=l.get(k).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(s),C.done.delete(s);if((s.f&S)!==0)if(s.f^=S,s===n)q(s,null,t);else{var T=u?u.next:n;s===e.effect.last&&(e.effect.last=s.prev),s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),D(e,u,s),D(e,s,T),q(s,T,t),u=s,m=[],h=[],n=G(u.next);continue}if((s.f&W)!==0&&(ge(s),r&&(s.nodes?.a?.unfix(),(p??=new Set).delete(s))),s!==n){if(v!==void 0&&v.has(s)){if(m.length<h.length){var P=h[0],c;u=P.prev;var _=m[0],y=m[m.length-1];for(c=0;c<m.length;c+=1)q(m[c],P,t);for(c=0;c<h.length;c+=1)v.delete(h[c]);D(e,_.prev,y.next),D(e,u,_),D(e,y,P),n=P,u=y,f-=1,m=[],h=[]}else v.delete(s),q(s,n,t),D(e,s.prev,s.next),D(e,s,u===null?e.effect.first:u.next),D(e,u,s),u=s;continue}for(m=[],h=[];n!==null&&n!==s;)(v??=new Set).add(n),h.push(n),n=G(n.next);if(n===null)continue}(s.f&S)===0&&m.push(s),u=s,n=G(s.next)}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(re(se(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||v!==void 0){var g=[];if(v!==void 0)for(s of v)(s.f&W)===0&&g.push(s);for(;n!==null;)(n.f&W)===0&&n!==e.fallback&&g.push(n),n=G(n.next);var M=g.length;if(M>0){var w=(i&me)!==0&&o===0?t:null;if(r){for(f=0;f<M;f+=1)g[f].nodes?.a?.measure();for(f=0;f<M;f+=1)g[f].nodes?.a?.fix()}ea(e,g,w)}}r&&Se(()=>{if(p!==void 0)for(s of p)s.nodes?.a?.apply()})}function ra(e,a,t,i,d,r,o,l){var n=(o&Re)!==0?(o&Pe)===0?Q(t,!1,!1):ce(t):null,v=(o&we)!==0?ce(d):null;return{v:n,i:v,e:ae(()=>(r(a,n??t,v??d,l),()=>{e.delete(i)}))}}function q(e,a,t){if(e.nodes)for(var i=e.nodes.start,d=e.nodes.end,r=a&&(a.f&S)===0?a.nodes.start:t;i!==null;){var o=K(i);if(r.before(i),i===d)return;i=o}}function D(e,a,t){a===null?e.effect.first=t:a.next=t,t===null?e.effect.last=a:t.prev=a}function ta(e,a,t=!1,i=!1,d=!1){var r=e,o="";U(()=>{var l=Le;if(o===(o=a()??"")){E&&ee();return}if(l.nodes!==null&&(Ne(l.nodes.start,l.nodes.end),l.nodes=null),o!==""){if(E){B.data;for(var n=ee(),v=n;n!==null&&(n.nodeType!==ne||n.data!=="");)v=n,n=K(n);if(n===null)throw ze(),Ie;ie(B,v),r=x(n);return}var u=o+"";t?u=`<svg>${u}</svg>`:i&&(u=`<math>${u}</math>`);var p=_e(u);if((t||i)&&(p=V(p)),ie(V(p),p.lastChild),t||i)for(;V(p);)r.before(V(p));else r.before(p)}})}function na(e,a){let t=null,i=E;var d;if(E){t=B;for(var r=V(document.head);r!==null&&(r.nodeType!==ne||r.data!==e);)r=K(r);if(r===null)$(!1);else{var o=K(r);r.remove(),x(o)}}E||(d=document.head.appendChild(j()));try{pe(()=>a(d),Ve)}finally{i&&($(!0),x(t))}}function sa(e,a,t){var i=e==null?"":""+e;return i===""?null:i}function ia(e,a,t,i,d,r){var o=e.__className;if(E||o!==t||o===void 0){var l=sa(t);(!E||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):e.className=l),e.__className=t}return r}function oa(e,a,t=a){var i=new WeakSet;xe(e,"input",async d=>{var r=d?e.defaultValue:e.value;if(r=X(e)?Z(r):r,t(r),I!==null&&i.add(I),await He(),r!==(r=a())){var o=e.selectionStart,l=e.selectionEnd,n=e.value.length;if(e.value=r??"",l!==null){var v=e.value.length;o===l&&l===n&&v>n?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=o,e.selectionEnd=Math.min(l,v))}}}),(E&&e.defaultValue!==e.value||Oe(a)==null&&e.value)&&(t(X(e)?Z(e.value):e.value),I!==null&&i.add(I)),Ge(()=>{var d=a();if(e===document.activeElement){var r=Qe??I;if(i.has(r))return}X(e)&&d===Z(e.value)||e.type==="date"&&!d&&!e.value||d!==e.value&&(e.value=d??"")})}function X(e){var a=e.type;return a==="number"||a==="range"}function Z(e){return e===""?null:+e}const la={madrid:{attractions:["Museo del Prado","Palacio Real","Parque del Retiro","Plaza Mayor","Puerta del Sol"],restaurants:["Sobrino de BotÃ­n","Casa Lucio","Mercado de San Miguel","La Latina"],transport:"Metro de Madrid, autobuses, taxis. Tarjeta Multi recomendada.",tips:"Mejor Ã©poca: primavera y otoÃ±o. Siesta de 14-16h. Cena tarde (22h+)."},barcelona:{attractions:["Sagrada Familia","Parque GÃ¼ell","Las Ramblas","Barrio GÃ³tico","Casa BatllÃ³"],restaurants:["Cal Pep","Quimet & Quimet","Mercado de la BoquerÃ­a","Els Quatre Gats"],transport:"Metro TMB, autobuses, Bicing (bicicletas). Hola Barcelona Card.",tips:"Playa urbana disponible. CatalÃ¡n y espaÃ±ol. Pickpockets en Las Ramblas."},roma:{attractions:["Coliseo","Foro Romano","Vaticano","Fontana di Trevi","PanteÃ³n"],restaurants:["Da Enzo al 29","Checchino dal 1887","Mercato Centrale","Trastevere"],transport:"Metro ATAC, autobuses, tranvÃ­as. Roma Pass recomendada.",tips:"Siesta 13-15h. Dress code en Vaticano. Agua gratis en fuentes pÃºblicas."},amsterdam:{attractions:["Rijksmuseum","Casa de Ana Frank","Canales","Vondelpark","Red Light District"],restaurants:["CafÃ© de Reiger","Restaurant Greetje","Foodhallen","Winkel 43"],transport:"Bicicletas (principal), tranvÃ­as GVB, metro. OV-chipkaart.",tips:"Bicicleta es obligatoria. Coffeeshops legales. Propinas no obligatorias."},paris:{attractions:["Torre Eiffel","Louvre","Notre-Dame","SacrÃ©-CÅ“ur","Champs-Ã‰lysÃ©es"],restaurants:["L'As du Fallafel","Du Pain et des IdÃ©es","MarchÃ© Saint-Germain","Le Comptoir du Relais"],transport:"Metro RATP, RER, autobuses. Navigo Easy o Passe Navigo.",tips:"Museos gratis primer domingo del mes. Propina incluida. Bonjour obligatorio."},venecia:{attractions:["Plaza San Marcos","Puente de Rialto","Palacio Ducal","Gondolas","Murano y Burano"],restaurants:["Osteria alle Testiere","Cantina Do Spade","Mercato di Rialto","Bacari tÃ­picos"],transport:"Vaporetto (barco-bus), a pie. ACTV travel card.",tips:"Acqua alta en invierno. Reservar restaurantes. Evitar trampas turÃ­sticas."},florencia:{attractions:["Duomo","Uffizi","Ponte Vecchio","Palazzo Pitti","Piazzale Michelangelo"],restaurants:["Trattoria Mario","All'Antico Vinaio","Mercato Centrale","Santo Spirito"],transport:"A pie (centro histÃ³rico), autobuses ATAF. Firenzecard.",tips:"Reservar Uffizi con anticipaciÃ³n. Aperitivo 18-20h. Gelato artesanal."}},ca={attractions:[`Para **{city}** te recomiendo visitar:

{attractions}

{tips}`,`En **{city}** no te puedes perder:

{attractions}

ğŸ’¡ {tips}`],restaurants:[`Para comer bien en **{city}**:

{restaurants}

ğŸ½ï¸ {tips}`,`Restaurantes recomendados en **{city}**:

{restaurants}

{tips}`],transport:[`Para moverte en **{city}**:

{transport}

{tips}`,`Transporte en **{city}**:

{transport}

ğŸ’¡ {tips}`],general:[`En **{city}** puedes:

**ğŸ›ï¸ Atracciones:** {attractions}

**ğŸ½ï¸ Restaurantes:** {restaurants}

**ğŸš‡ Transporte:** {transport}

ğŸ’¡ **Tips:** {tips}`]};function te(e){const a={madrid:["madrid","prado","retiro","sol"],barcelona:["barcelona","sagrada","gÃ¼ell","ramblas","gaudÃ­"],roma:["roma","coliseo","vaticano","trevi","romano"],amsterdam:["amsterdam","rijks","canales","ana frank","vondelpark"],paris:["paris","parÃ­s","eiffel","louvre","notre","champs"],venecia:["venecia","venice","san marcos","rialto","gondola"],florencia:["florencia","florence","uffizi","duomo","ponte vecchio"]},t=e.toLowerCase();for(const[i,d]of Object.entries(a))if(d.some(r=>t.includes(r)))return i;return null}function ua(e){const a=e.toLowerCase();return a.includes("comer")||a.includes("restaurante")||a.includes("comida")?"restaurants":a.includes("transporte")||a.includes("mover")||a.includes("metro")||a.includes("aeropuerto")?"transport":a.includes("ver")||a.includes("visitar")||a.includes("hacer")||a.includes("museo")?"attractions":"general"}function ve(e){return e.map(a=>`â€¢ ${a}`).join(`
`)}function da(e){return e[Math.floor(Math.random()*e.length)]}function fa(e,a){let t=null,i=null;for(let o=a.length-1;o>=0;o--){const l=a[o];if(l.type==="user"){const n=te(l.content);if(n){t=n;break}}}const d=e.toLowerCase(),r=["ahÃ­","allÃ­","allÃ¡","ese lugar","esa ciudad","tambiÃ©n","y","ademÃ¡s","otra cosa","mÃ¡s","otros","otras"].some(o=>d.includes(o));return{lastCity:t,lastIntent:i,needsContext:r&&!te(e)}}async function va(e,a=[]){await new Promise(v=>setTimeout(v,300));const t=fa(e,a),i=te(e)||t.lastCity,d=ua(e);if(!i)return t.needsContext?"ğŸ¤” Â¿Te referÃ­s a la misma ciudad de tu pregunta anterior? PodÃ©s mencionar especÃ­ficamente Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia para ayudarte mejor.":"ğŸ¤” No pude identificar la ciudad especÃ­fica. Â¿PodrÃ­as mencionar Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia?";const r=la[i],o=ca[d],l=da(o);let n="";return t.lastCity&&t.lastCity===i&&a.length>1&&(n="Siguiendo con "+i.charAt(0).toUpperCase()+i.slice(1)+`:

`),n+l.replace(/{city}/g,i.charAt(0).toUpperCase()+i.slice(1)).replace(/{attractions}/g,ve(r.attractions.slice(0,5))).replace(/{restaurants}/g,ve(r.restaurants)).replace(/{transport}/g,r.transport).replace(/{tips}/g,r.tips)}var pa=H('<meta name="description" content="Tu asistente turÃ­stico offline para Europa"/>'),ma=H('<button class="suggestion"> </button>'),ga=H('<div class="avatar">ğŸ‡ªğŸ‡º</div>'),ha=H('<div><!> <div class="message-content"><!></div></div>'),_a=H('<div class="message assistant"><div class="avatar">ğŸ‡ªğŸ‡º</div> <div class="typing-indicator"><div class="typing-dots"><div class="dot"></div> <div class="dot"></div> <div class="dot"></div></div> <span style="font-size: 14px; color: #666;">Escribiendo...</span></div></div>'),ba=H('<div class="container"><div class="header"><h1>ğŸ‡ªğŸ‡º Europe Travel Assistant</h1> <div class="subtitle">Tu guÃ­a personal para Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia, Florencia</div></div> <div class="suggestions"></div> <div class="chat-container"><!> <!></div> <div class="input-container"><textarea class="input-field" placeholder="Preguntame sobre Europa..." rows="1"></textarea> <button class="send-button">â–¶ï¸</button></div></div>');function Aa(e,a){qe(a,!1);let t=Q([{id:1,type:"assistant",content:`Â¡Hola! Soy tu asistente personal para Europa. Preguntame sobre quÃ© hacer, dÃ³nde comer, cÃ³mo moverte o cualquier cosa sobre Madrid, Barcelona, Roma, Amsterdam, ParÃ­s, Venecia o Florencia.

**Todo funciona offline** âœˆï¸ - perfecto para tus viajes.`}]),i=Q(""),d=Q(!1),r=Q();const o=["Â¿QuÃ© hacer esta tarde en Roma?","Restaurantes baratos en ParÃ­s","CÃ³mo ir del aeropuerto al centro en Amsterdam","Mejores museos en Madrid"];function l(){b(r)&&setTimeout(()=>{We(r,b(r).scrollTop=b(r).scrollHeight)},100)}async function n(c=b(i).trim()){if(!c)return;const _={id:Date.now(),type:"user",content:c};R(t,[...b(t),_]),R(i,""),l(),R(d,!0),l();try{await new Promise(M=>setTimeout(M,500));const y=await va(c,b(t)),g={id:Date.now()+1,type:"assistant",content:y};R(d,!1),R(t,[...b(t),g]),l()}catch{R(d,!1);const g={id:Date.now()+1,type:"assistant",content:"Lo siento, hubo un error procesando tu pregunta. Â¿PodÃ©s intentar de nuevo?"};R(t,[...b(t),g]),l()}}function v(c){c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),n())}function u(c){R(i,c),n()}$e(()=>{l()}),be();var p=ba();na("1uha8ag",c=>{var _=pa();Ue(()=>{Ke.title="Europe Travel Assistant"}),L(c,_)});var m=z(N(p),2);fe(m,5,()=>o,Ze,(c,_)=>{var y=ma(),g=N(y,!0);F(y),U(()=>Je(g,b(_))),J("click",y,()=>u(b(_))),L(c,y)}),F(m);var h=z(m,2),A=N(h);fe(A,1,()=>b(t),c=>c.id,(c,_)=>{var y=ha(),g=N(y);{var M=O=>{var Y=ga();L(O,Y)};ue(g,O=>{b(_).type==="assistant"&&O(M)})}var w=z(g,2),C=N(w);ta(C,()=>b(_).content.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")),F(w),F(y),U(()=>ia(y,1,`message ${b(_).type??""}`)),L(c,y)});var k=z(A,2);{var s=c=>{var _=_a();L(c,_)};ue(k,c=>{b(d)&&c(s)})}F(h),Xe(h,c=>R(r,c),()=>b(r));var f=z(h,2),T=N(f);Ye(T);var P=z(T,2);F(f),F(p),U(c=>P.disabled=c,[()=>!b(i).trim()]),oa(T,()=>b(i),c=>R(i,c)),J("keydown",T,v),J("click",P,()=>n()),L(e,p),je()}export{Aa as component};
